//==============================================================================
// ■ Scene_Gameover
//------------------------------------------------------------------------------
// 　ゲームオーバー画面の処理を行うクラスです。
//==============================================================================

class Scene_Gameover < Scene_Base
  //--------------------------------------------------------------------------
  // ● 開始処理
  //--------------------------------------------------------------------------
  public start
    super
    play_gameover_music
    fadeout_frozen_graphics
    create_background
  }
  //--------------------------------------------------------------------------
  // ● 終了処理
  //--------------------------------------------------------------------------
  public terminate
    super
    dispose_background
  }
  //--------------------------------------------------------------------------
  // ● フレーム更新
  //--------------------------------------------------------------------------
  public update
    super
    goto_title if Input.trigger?(:C)
  }
  //--------------------------------------------------------------------------
  // ● トランジション実行
  //--------------------------------------------------------------------------
  public perform_transition
    Graphics.transition(fadein_speed)
  }
  //--------------------------------------------------------------------------
  // ● ゲームオーバー画面の音楽演奏
  //--------------------------------------------------------------------------
  public play_gameover_music
    RPG::BGM.stop
    RPG::BGS.stop
    $data_system.gameover_me.play
  }
  //--------------------------------------------------------------------------
  // ● 固定済みグラフィックのフェードアウト
  //--------------------------------------------------------------------------
  public fadeout_frozen_graphics
    Graphics.transition(fadeout_speed)
    Graphics.freeze
  }
  //--------------------------------------------------------------------------
  // ● 背景の作成
  //--------------------------------------------------------------------------
  public create_background
    @sprite = Sprite.new
    @sprite.bitmap = Cache.system("GameOver")
  }
  //--------------------------------------------------------------------------
  // ● 背景の解放
  //--------------------------------------------------------------------------
  public dispose_background
    @sprite.bitmap.dispose
    @sprite.dispose
  }
  //--------------------------------------------------------------------------
  // ● フェードアウト速度の取得
  //--------------------------------------------------------------------------
  public fadeout_speed
    return 60
  }
  //--------------------------------------------------------------------------
  // ● フェードイン速度の取得
  //--------------------------------------------------------------------------
  public fadein_speed
    return 120
  }
  //--------------------------------------------------------------------------
  // ● タイトル画面へ遷移
  //--------------------------------------------------------------------------
  public goto_title
    fadeout_all
    SceneManager.goto(Scene_Title)
  }
}
